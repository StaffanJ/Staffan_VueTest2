{"ast":null,"code":"import { defineComponent } from 'vue';\nexport default defineComponent({\n  // Data vi anv�nder i denna komponenten, denna delen �r jag lite os�ker p� fortfarande.\n  data() {\n    return {\n      EmployeeGet: null,\n      EmployeePost: null,\n      EmployeeRoll: null,\n      Employeeloading: false,\n      EmployeeEdit: false,\n      EmployeeRollShow: false,\n      EmpIsAvailable: 0,\n      employeeEditInfo: {\n        id: 0,\n        firstName: \"\",\n        lastName: \"\",\n        age: 0\n      }\n    };\n  },\n\n  // K�rs n�r applikationen startar.\n  async created() {\n    // fetch the data when the view is created and the data is\n    // already being observed\n    this.fetchEmployee();\n  },\n\n  // !!!!!!!!!!!!!!!! Ta reda p� mer om watch.\n  watch: {\n    // call again the method if the route changes\n    '$route': 'fetchEmployee'\n  },\n  // Metoderna som vi kan anv�nda oss av och kalla p�.\n  methods: {\n    // H�mtar alla anst�llda och retunerar dem.\n    fetchEmployee() {\n      this.EmployeeGet = null;\n      this.Employeeloading = true;\n      this.EmployeeEdit = false;\n      fetch('Employee').then(r => r.json()).then(json => {\n        this.EmployeeGet = json;\n        this.Employeeloading = false;\n        this.EmployeeGet.forEach((value, index) => {\n          if (value.isAvailable) {\n            this.increment();\n          }\n        });\n        return;\n      }).catch(err => {\n        err;\n      });\n      ;\n    },\n\n    // �ndrar om en anst�lld �r tillg�nglig f�r ett request.\n    changeStatusEmployee(employee, isAvailable) {\n      this.EmployeePost = null; //this.EmployeePostLoading = true;\n\n      fetch('Employee/ChangeStatus/', {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: employee,\n          isavailable: isAvailable\n        })\n      }).then(r => r.json()).then(json => {\n        this.EmployeePost = json;\n        this.fetchEmployee();\n        return;\n      }).catch(err => {\n        err;\n      });\n    },\n\n    // H�mtar n�sta anst�lld som ska hantera uppgiften.\n    rollEmployee() {\n      this.EmployeeRoll = null;\n      this.EmployeeRollShow = true;\n      fetch('Employee/Roll', {}).then(r => r.json()).then(json => {\n        this.EmployeeRoll = json;\n        this.fetchEmployee();\n        return;\n      }).catch(err => {\n        err;\n      });\n    },\n\n    // Tar fram vyn f�r att �ndra information.\n    changeEmployeeInformation(id, firstName, lastName, age) {\n      this.EmployeeGet = null;\n      this.EmployeePost = null;\n      this.EmployeeRoll = null;\n      this.EmployeeEdit = true;\n      this.employeeEditInfo.id = id;\n      this.employeeEditInfo.firstName = firstName;\n      this.employeeEditInfo.lastName = lastName;\n      this.employeeEditInfo.age = age;\n    },\n\n    // Tar fram vyn f�r att �ndra information \n    changeEmployeeInformationPost() {\n      fetch('Employee/ChangeInformation/', {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: this.employeeEditInfo.id,\n          firstName: this.employeeEditInfo.firstName,\n          lastName: this.employeeEditInfo.lastName,\n          age: this.employeeEditInfo.age\n        })\n      }).then(r => r.json()).then(json => {\n        this.fetchEmployee();\n        return;\n      }).catch(err => {\n        err;\n      });\n    },\n\n    increment() {\n      //console.log(this.EmpIsAvailable);\n      this.EmpIsAvailable += 1;\n    }\n\n  }\n});","map":{"version":3,"mappings":"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","names":["defineComponent","data","EmployeeGet","EmployeePost","EmployeeRoll","Employeeloading","EmployeeEdit","EmployeeRollShow","EmpIsAvailable","employeeEditInfo","id","firstName","lastName","age","created","fetchEmployee","watch","methods","fetch","then","r","json","forEach","value","index","isAvailable","increment","catch","err","changeStatusEmployee","employee","method","headers","body","JSON","stringify","isavailable","rollEmployee","changeEmployeeInformation","changeEmployeeInformationPost"],"sourceRoot":"","sources":["C:\\Users\\stajan\\source\\repos\\Staffan_VueTest2\\src\\components\\HelloWorld.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div v-if=\"EmployeeGet\" class=\"col\" id=\"employeesGet\">\r\n                <table class=\"table table-hover table-striped table-bordered caption-top\">\r\n                    <caption>List of employees</caption>\r\n                    <thead class=\"table-dark\">\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <!--<th>Id</th>-->\r\n                            <th>Firstname</th>\r\n                            <th>Lastname</th>\r\n                            <th>Number of times</th>\r\n                            <th>Is available</th>\r\n                            <th>Edit</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <!-- H�mtar alla anst�llda, kopplad till fetchEmployee() funktionen.-->\r\n                        <template v-for=\"emp in EmployeeGet\" :key=\"emp.id\">\r\n                            <tr>\r\n                                <td><img src=\"../icon/person-square.svg\"></td>\r\n                                <td>{{ emp.firstName }}</td>\r\n                                <td>{{ emp.lastName }}</td>\r\n                                <td>{{ emp.numOfTimes }}</td>\r\n                                <td v-if=\"emp.isAvailable === 0\" id=\"employeeStatusHover\">\r\n                                    <!-- Skickar in till funktionen changeStatusEmployee, skickar med id och om den anst�llda �r tillg�nglig.-->\r\n                                    <button type=\"submit\" class=\"btn\" @click.prevent=\"changeStatusEmployee(emp.id, emp.isAvailable)\"><img src=\"../icon/exclamation-circle.svg\"></button>\r\n                                    <!--{{ ++EmpIsAvailable }}-->\r\n                                </td>\r\n                                <td v-if=\"emp.isAvailable === 1\" id=\"employeeStatusHover\">\r\n                                    <!-- Skickar in till funktionen changeStatusEmployee, skickar med id och om den anst�llda �r tillg�nglig.-->\r\n                                    <button type=\"submit\" class=\"btn\" @click.prevent=\"changeStatusEmployee(emp.id, emp.isAvailable)\"><img src=\"../icon/exclamation-circle-fill.svg\"></button>\r\n                                </td>\r\n                                <td><button type=\"submit\" class=\"btn\" @click.prevent=\"changeEmployeeInformation(emp.id, emp.firstName, emp.lastName, emp.age)\"><img src=\"../icon/pencil-square.svg\"></button></td>\r\n                            </tr>\r\n                        </template>\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td>How many is available: {{ EmpIsAvailable }}</td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n            <!-- H�mtar en anst�lld, kopplad till rollEmployee() funktionen.-->\r\n            <div v-if=\"EmployeeRollShow\" class=\"col\" id=\"employeesPost\">\r\n                <table class=\"table table-bordered caption-top\">\r\n                    <caption>Employee for the next task</caption>\r\n                    <thead class=\"table-dark\">\r\n                        <tr>\r\n                            <th></th>\r\n                            <th>Name</th>\r\n                            <th>Number of times</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-if=\"EmployeeRoll\">\r\n                            <td><img src=\"../icon/person-workspace.svg\" /></td>\r\n                            <td>{{ EmployeeRoll.firstName }}</td>\r\n                            <td>{{ EmployeeRoll.numOfTimes }}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div v-if=\"EmployeeGet\" class=\"row\">\r\n            <div id=\"employeeRoll\" class=\"col\">\r\n                <div>\r\n                    <form @submit.prevent=\"rollEmployee\">\r\n                        <button type=\"submit\" class=\"btn btn-outline-info btn-sm\">Who gets to be the \"lucky\" one?</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"EmployeeEdit\" class=\"row\" id=\"employeeEdit\">\r\n            <div class=\"col-3\">\r\n\r\n            </div>\r\n            <div class=\"col-3\">\r\n                <p>Firstname:</p>\r\n                <p>Lastname:</p>\r\n                <p>Age:</p>\r\n            </div>\r\n            <div class=\"col-3\">\r\n                <input type=\"text\" v-model=\"employeeEditInfo.firstName\" /><br />\r\n                <input type=\"text\" v-model=\"employeeEditInfo.lastName\" /><br />\r\n                <input type=\"text\" v-model=\"employeeEditInfo.age\" />\r\n            </div>\r\n            <div class=\"col-3\">\r\n\r\n            </div>\r\n            <form @submit.prevent=\"changeEmployeeInformationPost\">\r\n                <button type=\"submit\" class=\"btn btn-outline-info btn-sm\">Submit changes.</button>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script lang=\"js\">\r\n    import { defineComponent } from 'vue';\r\n\r\n    export default defineComponent({\r\n        // Data vi anv�nder i denna komponenten, denna delen �r jag lite os�ker p� fortfarande.\r\n        data() {\r\n            return {\r\n                EmployeeGet: null,\r\n                EmployeePost: null,\r\n                EmployeeRoll: null,\r\n                Employeeloading: false,\r\n                EmployeeEdit: false,\r\n                EmployeeRollShow: false,\r\n                EmpIsAvailable: 0,\r\n\r\n                employeeEditInfo: {\r\n                    id: 0,\r\n                    firstName: \"\",\r\n                    lastName: \"\",\r\n                    age: 0\r\n                }\r\n            };\r\n        },\r\n        // K�rs n�r applikationen startar.\r\n        async created() {\r\n            // fetch the data when the view is created and the data is\r\n            // already being observed\r\n            this.fetchEmployee();\r\n        },\r\n        // !!!!!!!!!!!!!!!! Ta reda p� mer om watch.\r\n        watch: {\r\n            // call again the method if the route changes\r\n            '$route': 'fetchEmployee'\r\n        },\r\n        // Metoderna som vi kan anv�nda oss av och kalla p�.\r\n        methods: {\r\n            // H�mtar alla anst�llda och retunerar dem.\r\n            fetchEmployee(){\r\n                this.EmployeeGet = null;\r\n                this.Employeeloading = true;\r\n                this.EmployeeEdit = false;\r\n\r\n                fetch('Employee')\r\n                    .then(r => r.json())\r\n                    .then(json => {\r\n                        this.EmployeeGet = json;\r\n                        this.Employeeloading = false;\r\n\r\n                        this.EmployeeGet.forEach((value, index) => {\r\n                            if (value.isAvailable) {\r\n                                this.increment();\r\n                            }\r\n                        });\r\n\r\n                        return;\r\n                    })\r\n                    .catch(err => {\r\n                        err\r\n                    });;\r\n            },\r\n            // �ndrar om en anst�lld �r tillg�nglig f�r ett request.\r\n            changeStatusEmployee(employee, isAvailable) {\r\n                this.EmployeePost = null;\r\n                //this.EmployeePostLoading = true;\r\n\r\n                fetch('Employee/ChangeStatus/', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json'\r\n                    },\r\n                        body: JSON.stringify({ id: employee, isavailable: isAvailable })\r\n                    })\r\n                    .then(r => r.json())\r\n                    .then(json => {\r\n                        this.EmployeePost = json;\r\n                        this.fetchEmployee();\r\n                        return;\r\n                    })\r\n                    .catch(err => {\r\n                        err\r\n                    });\r\n            },\r\n            // H�mtar n�sta anst�lld som ska hantera uppgiften.\r\n            rollEmployee() {\r\n                this.EmployeeRoll = null;\r\n                this.EmployeeRollShow = true;\r\n\r\n                fetch('Employee/Roll', {\r\n                })\r\n                .then(r => r.json())\r\n                .then(json => {\r\n                    this.EmployeeRoll = json;\r\n                    this.fetchEmployee();\r\n                    return;\r\n                })\r\n                .catch(err => {\r\n                    err\r\n                });\r\n            },\r\n            // Tar fram vyn f�r att �ndra information.\r\n            changeEmployeeInformation(id, firstName, lastName, age) {\r\n                this.EmployeeGet = null;\r\n                this.EmployeePost = null;\r\n                this.EmployeeRoll = null;\r\n                this.EmployeeEdit = true;\r\n\r\n                this.employeeEditInfo.id = id;\r\n                this.employeeEditInfo.firstName = firstName;\r\n                this.employeeEditInfo.lastName = lastName;\r\n                this.employeeEditInfo.age = age;\r\n            },\r\n            // Tar fram vyn f�r att �ndra information \r\n            changeEmployeeInformationPost() {\r\n                fetch('Employee/ChangeInformation/', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({ id: this.employeeEditInfo.id, firstName: this.employeeEditInfo.firstName, lastName: this.employeeEditInfo.lastName, age: this.employeeEditInfo.age})\r\n                })\r\n                    .then(r => r.json())\r\n                    .then(json => {\r\n                        this.fetchEmployee();\r\n                        return;\r\n                    })\r\n                    .catch(err => {\r\n                        err\r\n                    });\r\n                \r\n            },\r\n            increment() {\r\n                //console.log(this.EmpIsAvailable);\r\n                this.EmpIsAvailable += 1;\r\n            }\r\n        },\r\n    });\r\n\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}